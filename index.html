<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GA Lottery Ultimate Math System v2</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; overscroll-behavior: none; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .input-glass { background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); color: white; }
        @keyframes shine { to { background-position: 200% center; } }
        .shine-text { background: linear-gradient(to right, #fbbf24, #fff, #fbbf24); background-size: 200% auto; background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: shine 3s linear infinite; }
        .ball-shadow { box-shadow: inset -4px -4px 6px rgba(0,0,0,0.4), inset 2px 2px 6px rgba(255,255,255,0.4), 0px 4px 6px rgba(0,0,0,0.3); }
    </style>
</head>
<body class="text-white min-h-screen pb-20 select-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- MATH & UTILS ---
        
        const formatMoney = (amount) => {
            return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(amount);
        };

        const calculateTaxes = (jackpotValue) => {
            // Estimates based on standard lump sum ratio (~48%) and 2025 Tax Rates
            const cashValue = jackpotValue * 0.48; 
            const fedTax = cashValue * 0.24; // 24% upfront federal
            const stateTax = cashValue * 0.0575; // 5.75% GA state tax
            const totalTax = fedTax + stateTax;
            const takeHome = cashValue - totalTax;

            return {
                cashValue,
                fedTax,
                stateTax,
                takeHome
            };
        };

        const LotteryApp = () => {
            const [selectedGame, setSelectedGame] = useState('powerball');
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [progress, setProgress] = useState(0);
            const [results, setResults] = useState(null);
            const [customJackpot, setCustomJackpot] = useState(20000000); // Default start
            
            // GAME CONFIGURATIONS
            const games = {
                powerball: { 
                    name: 'Powerball', 
                    mainMax: 69, mainCount: 5, 
                    specialMax: 26, specialName: 'PB', hasSpecial: true,
                    color: 'from-red-600 to-rose-900', 
                    accent: 'bg-red-500' 
                },
                megamillions: { 
                    name: 'Mega Millions', 
                    mainMax: 70, mainCount: 5, 
                    specialMax: 25, specialName: 'MB', hasSpecial: true,
                    color: 'from-blue-600 to-indigo-900', 
                    accent: 'bg-blue-500' 
                },
                fantasy5: { 
                    name: 'Fantasy 5', 
                    mainMax: 42, mainCount: 5, 
                    hasSpecial: false,
                    color: 'from-amber-500 to-orange-700', 
                    accent: 'bg-orange-500' 
                },
                cash4life: { 
                    name: 'Cash4Life', 
                    mainMax: 60, mainCount: 5, 
                    specialMax: 4, specialName: 'CB', hasSpecial: true,
                    color: 'from-emerald-500 to-green-800', 
                    accent: 'bg-emerald-500' 
                }
            };

            const currentGame = games[selectedGame];
            const taxInfo = calculateTaxes(customJackpot);

            // Handle Game Switch (Reset Logic)
            const switchGame = (key) => {
                setSelectedGame(key);
                setResults(null);
                setIsAnalyzing(false);
                setProgress(0);
                // Set meaningful defaults for jackpots when switching
                if(key === 'fantasy5') setCustomJackpot(125000);
                else if(key === 'cash4life') setCustomJackpot(7000000); // Lifetime value approx
                else setCustomJackpot(100000000);
            };

            const resetSystem = () => {
                setResults(null);
                setIsAnalyzing(false);
                setProgress(0);
            };

            // THE SIMULATION ENGINE
            const runAnalysis = () => {
                setIsAnalyzing(true);
                setProgress(0);
                setResults(null);

                let step = 0;
                const interval = setInterval(() => {
                    step += 2;
                    setProgress(step);
                    if (step >= 100) {
                        clearInterval(interval);
                        finalizeNumbers();
                    }
                }, 30);
            };

            const finalizeNumbers = () => {
                const pick = { main: [], special: null };
                
                // 1. Generate Main Numbers (Monte Carlo Lite)
                // We create a "pool" and pick randoms to simulate high-entropy selection
                const mainPool = Array.from({length: currentGame.mainMax}, (_, i) => i + 1);
                
                // Fisher-Yates Shuffle for true randomness
                for (let i = mainPool.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [mainPool[i], mainPool[j]] = [mainPool[j], mainPool[i]];
                }
                
                // Take top N numbers
                pick.main = mainPool.slice(0, currentGame.mainCount).sort((a,b) => a-b);

                // 2. Generate Special Ball (if needed)
                if (currentGame.hasSpecial) {
                    pick.special = Math.floor(Math.random() * currentGame.specialMax) + 1;
                }

                setResults(pick);
                setIsAnalyzing(false);
            };

            return (
                <div className="max-w-md mx-auto min-h-screen bg-slate-950 text-slate-100 flex flex-col font-sans">
                    
                    {/* Header */}
                    <div className="p-4 bg-slate-900/80 border-b border-slate-800 backdrop-blur-md sticky top-0 z-50">
                        <div className="flex justify-between items-center mb-3">
                            <h1 className="text-xl font-black italic tracking-tighter text-white">
                                <span className="text-yellow-400">GA</span> LOTTERY LAB
                            </h1>
                            <div className="text-[10px] bg-slate-800 px-2 py-1 rounded text-slate-400 border border-slate-700">
                                v2.0 SYSTEM READY
                            </div>
                        </div>

                        {/* Game Selector Tabs */}
                        <div className="grid grid-cols-4 gap-1 p-1 bg-slate-900 rounded-lg border border-slate-800">
                            {Object.entries(games).map(([key, game]) => (
                                <button
                                    key={key}
                                    onClick={() => switchGame(key)}
                                    className={`py-2 rounded-md text-[10px] font-bold transition-all ${
                                        selectedGame === key 
                                        ? `bg-slate-700 text-white shadow-sm ring-1 ring-slate-600` 
                                        : 'text-slate-500 hover:text-slate-300'
                                    }`}
                                >
                                    {game.name.replace(' ', '\n')}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="flex-1 p-4 space-y-5 overflow-y-auto">
                        
                        {/* 1. JACKPOT EDITOR & CALCULATOR */}
                        <div className={`rounded-xl bg-gradient-to-br ${currentGame.color} p-0.5 shadow-xl`}>
                            <div className="bg-slate-900/90 rounded-[10px] p-4 backdrop-blur-xl">
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <label className="text-[10px] text-slate-400 uppercase font-bold tracking-wider">Current Jackpot</label>
                                        <div className="flex items-center gap-2 mt-1">
                                            <span className="text-lg text-slate-400">$</span>
                                            <input 
                                                type="number" 
                                                value={customJackpot}
                                                onChange={(e) => setCustomJackpot(Number(e.target.value))}
                                                className="bg-transparent text-2xl font-black text-white w-full focus:outline-none border-b border-slate-600 focus:border-yellow-400 transition-colors"
                                            />
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-[10px] text-slate-500">Tap number to edit</div>
                                    </div>
                                </div>

                                {/* Tax Breakdown Grid */}
                                <div className="grid grid-cols-2 gap-2 text-xs">
                                    <div className="bg-black/20 p-2 rounded">
                                        <div className="text-slate-400 mb-1">Cash Option</div>
                                        <div className="font-mono font-bold text-white">{formatMoney(taxInfo.cashValue)}</div>
                                    </div>
                                    <div className="bg-emerald-500/10 p-2 rounded border border-emerald-500/20">
                                        <div className="text-emerald-400 mb-1">Take Home (GA)</div>
                                        <div className="font-mono font-bold text-emerald-300">{formatMoney(taxInfo.takeHome)}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* 2. MAIN INTERFACE */}
                        {!results ? (
                            <div className="glass rounded-2xl p-6 text-center border-t border-white/5">
                                <div className="mb-8">
                                    <div className={`w-16 h-16 mx-auto rounded-full bg-gradient-to-br ${currentGame.color} flex items-center justify-center mb-4 shadow-lg`}>
                                        <span className="text-2xl">ðŸŽ°</span>
                                    </div>
                                    <h2 className="text-xl font-bold text-white mb-1">{currentGame.name} Engine</h2>
                                    <p className="text-xs text-slate-400">Ready to calculate optimal set</p>
                                </div>

                                {isAnalyzing ? (
                                    <div className="space-y-2">
                                        <div className="h-10 bg-slate-800 rounded-lg overflow-hidden relative border border-slate-700">
                                            <div 
                                                className={`absolute left-0 top-0 h-full ${currentGame.accent} transition-all duration-100 opacity-50`}
                                                style={{ width: `${progress}%` }}
                                            ></div>
                                            <div className="absolute inset-0 flex items-center justify-center text-xs font-mono font-bold">
                                                PROCESSING... {progress}%
                                            </div>
                                        </div>
                                        <div className="text-[10px] text-slate-500 animate-pulse">Running Monte Carlo Simulations...</div>
                                    </div>
                                ) : (
                                    <button 
                                        onClick={runAnalysis}
                                        className={`w-full py-4 rounded-xl font-bold text-lg shadow-lg bg-gradient-to-r ${currentGame.color} hover:brightness-110 active:scale-95 transition-all`}
                                    >
                                        GENERATE NUMBERS
                                    </button>
                                )}
                            </div>
                        ) : (
                            <div className="space-y-4 animate-in slide-in-from-bottom-5 duration-500 fade-in">
                                {/* RESULT CARD */}
                                <div className="glass rounded-2xl p-6 relative overflow-hidden">
                                    <div className={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${currentGame.color}`}></div>
                                    
                                    <div className="text-center mb-6">
                                        <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4">Optimal Selection</div>
                                        
                                        {/* BALL DISPLAY */}
                                        <div className="flex flex-wrap justify-center items-center gap-2 sm:gap-3">
                                            {/* Main Balls */}
                                            {results.main.map((num, i) => (
                                                <div key={i} className="w-10 h-10 sm:w-12 sm:h-12 bg-white text-slate-900 rounded-full flex items-center justify-center text-lg sm:text-xl font-black ball-shadow relative z-10">
                                                    {num}
                                                </div>
                                            ))}
                                            
                                            {/* Special Ball (if exists) */}
                                            {results.special !== null && (
                                                <div className={`w-10 h-10 sm:w-12 sm:h-12 ${currentGame.accent} text-white rounded-full flex items-center justify-center text-lg sm:text-xl font-black ball-shadow relative z-10 ring-2 ring-white/20 ml-2`}>
                                                    {results.special}
                                                </div>
                                            )}
                                        </div>
                                        
                                        {/* Labels */}
                                        {results.special !== null && (
                                            <div className="flex justify-center gap-16 mt-2 text-[10px] text-slate-500 font-bold">
                                                <span>Main Numbers</span>
                                                <span className={currentGame.color.split(' ')[1].replace('to-', 'text-')}>
                                                    {currentGame.specialName}
                                                </span>
                                            </div>
                                        )}
                                    </div>

                                    {/* Action Buttons */}
                                    <div className="grid grid-cols-2 gap-3 mt-6">
                                        <button 
                                            onClick={resetSystem}
                                            className="py-3 bg-slate-800 hover:bg-slate-700 rounded-lg font-semibold text-xs border border-slate-700"
                                        >
                                            Generate Again
                                        </button>
                                        <button 
                                            className="py-3 bg-slate-800 hover:bg-slate-700 rounded-lg font-semibold text-xs border border-slate-700"
                                            onClick={() => {
                                                const nums = results.main.join(', ') + (results.special ? ` + ${results.special}` : '');
                                                navigator.clipboard.writeText(nums);
                                                alert('Numbers copied!');
                                            }}
                                        >
                                            Copy Numbers
                                        </button>
                                    </div>
                                </div>

                                <div className="text-center text-[10px] text-slate-600">
                                    <p>Based on entropy & probability logic.</p>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LotteryApp />);
    </script>
</body>
</html>
